<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Danh sách Tour | Việt Lữ Travel</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Include Header & Footer fragments -->
    <th:block th:replace="~{fragments/header :: header-css}"></th:block>
    <th:block th:replace="~{fragments/footer :: footer-css}"></th:block>

    <style>
        :root {
            --ocean-blue: #0891b2;
            --ocean-blue-dark: #0e7490;
            --ocean-blue-light: #06b6d4;
            --light-bg: #f0f9ff;
            --card-bg: #ffffff;
            --text-primary: #0c4a6e;
            --text-secondary: #64748b;
            --shadow-sm: 0 4px 12px rgba(8, 145, 178, 0.1);
            --shadow-md: 0 10px 30px rgba(8, 145, 178, 0.15);
        }

        [data-theme="dark"] {
            --light-bg: #0f172a;
            --card-bg: #1e293b;
            --text-primary: #e2e8f0;
            --text-secondary: #94a3b8;
        }

        body {
            background: var(--light-bg);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: background 0.4s ease;
        }

        .main-content { flex: 1; }

        .tour-card {
            border: none;
            border-radius: 16px;
            overflow: hidden;
            background: var(--card-bg);
            box-shadow: var(--shadow-sm);
            transition: all 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .tour-card:hover {
            transform: translateY(-12px);
            box-shadow: var(--shadow-md);
        }

        .tour-img {
            height: 220px;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .tour-card:hover .tour-img { transform: scale(1.08); }

        .price-tag {
            font-weight: 700;
            color: var(--ocean-blue-dark);
            font-size: 1.35rem;
        }

        .section-box {
            border-radius: 16px;
            background: var(--card-bg);
            box-shadow: var(--shadow-sm);
            overflow: hidden;
        }

        .btn-primary {
            background: var(--ocean-blue);
            border: none;
            transition: all 0.3s;
        }

        .btn-primary:hover {
            background: var(--ocean-blue-dark);
            transform: translateY(-2px);
        }

        .btn-3d-tour {
            background: linear-gradient(135deg, var(--ocean-blue), #0e7490);
            color: white;
            font-weight: 600;
            padding: 0.75rem 1.75rem;
            border-radius: 50px;
            box-shadow: 0 6px 20px rgba(8, 145, 178, 0.35);
            transition: all 0.35s ease;
            border: none;
        }

        .btn-3d-tour:hover {
            transform: scale(1.1) translateY(-4px);
            box-shadow: 0 12px 32px rgba(8, 145, 178, 0.45);
            background: linear-gradient(135deg, #0e7490, var(--ocean-blue));
        }

        #adCarousel {
            max-width: 1100px;
            margin: 2rem auto;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        #adCarousel .carousel-item img {
            height: 320px;
            object-fit: cover;
        }

        .carousel-caption-custom {
            bottom: 25%;
            left: 50%;
            transform: translateX(-50%);
            text-shadow: 0 3px 12px rgba(0,0,0,0.7);
        }

        .alert-warning {
            background: rgba(6, 182, 212, 0.1);
            border-color: var(--ocean-blue-light);
            color: var(--text-primary);
        }

        h2 { color: var(--ocean-blue-dark); font-weight: 700; }

        .text-primary { color: var(--ocean-blue) !important; }

        @media (max-width: 768px) {
            #adCarousel .carousel-item img { height: 220px; }
            .carousel-caption-custom { bottom: 15%; font-size: 0.9rem; }
            .btn-3d-tour { padding: 0.6rem 1.4rem; font-size: 0.95rem; }
            .tour-img { height: 180px; }
        }

        /* Dark mode toggle (optional) */
        #theme-toggle {
    position: fixed;
    top: 90px;      /* nằm dưới header */
    right: 20px;
    z-index: 1000;
}

        /* ===== Floating Chat Button ===== */
.chat-float{
    position: fixed;
    bottom: 25px;
    right: 25px;
    width: 65px;
    height: 65px;
    border-radius: 50%;
    background: linear-gradient(135deg, #06b6d4, #0e7490);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px;
    box-shadow: 0 10px 30px rgba(8,145,178,0.4);
    z-index: 9999;
    text-decoration: none;
    transition: all 0.35s ease;
    animation: chatPulse 2s infinite;
}

.chat-float:hover{
    transform: scale(1.15) rotate(8deg);
    box-shadow: 0 15px 40px rgba(8,145,178,0.6);
}

/* Hiệu ứng nhấp nháy */
@keyframes chatPulse{
    0%{ box-shadow: 0 0 0 0 rgba(6,182,212,0.6); }
    70%{ box-shadow: 0 0 0 18px rgba(6,182,212,0); }
    100%{ box-shadow: 0 0 0 0 rgba(6,182,212,0); }
}

    </style>
</head>
<body>

<!-- Header -->
<th:block th:replace="~{fragments/header :: header}"></th:block>

<main class="main-content">

    <!-- Carousel Quảng cáo -->
    <div class="container mt-4 mb-5">
        <div id="adCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel">
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#adCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#adCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
                <button type="button" data-bs-target="#adCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
                <button type="button" data-bs-target="#adCarousel" data-bs-slide-to="2" aria-label="Slide 4"></button>
            </div>

            <div class="carousel-inner rounded-4 shadow">
                <div class="carousel-item active">
                    <img src="/image/dl.jpg" class="d-block w-100" alt="Tour An Giang" loading="lazy">
                </div>
                <div class="carousel-item">
                    <img src="/image/b4.jpg" class="d-block w-100" alt="Tour đặc sắc" loading="lazy">
                </div>
                <div class="carousel-item">
                    <img src="/image/b3.jpg" class="d-block w-100" alt="Khuyến mãi" loading="lazy">
                </div>
                <div class="carousel-item">
                    <img src="/image/b9.jpg" class="d-block w-100" alt="Khuyến mãi" loading="lazy">
                </div>

            </div>

            <button class="carousel-control-prev" type="button" data-bs-target="#adCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#adCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>

    <!-- Form Tìm kiếm -->
    <div class="container mb-5">
        <div class="section-box p-4">
            <form class="row g-3 align-items-end">
                <div class="col-md-6 col-lg-5">
                    <label class="form-label fw-semibold text-secondary">Tìm kiếm tour</label>
                    <input type="text" class="form-control form-control-lg" placeholder="Tên tour, địa điểm...">
                </div>
                <div class="col-md-3 col-lg-2">
                    <label class="form-label fw-semibold text-secondary">Ngày khởi hành</label>
                    <input type="date" class="form-control form-control-lg">
                </div>
                <div class="col-md-3 col-lg-2">
                    <button class="btn btn-primary btn-lg w-100">
                        <i class="bi bi-search"></i> Tìm
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Danh sách Tour -->
    <div class="container pb-5">
        <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-3">
            <h2 class="fw-bold m-0">
                <i class="bi bi-airplane-fill me-2"></i> Tour 3D An Giang
            </h2>
            <a href="/tour3d" class="btn btn-3d-tour btn-lg">
                <i class="bi bi-vr"></i> Khám phá 360° & 3D
            </a>
        </div>

        <!-- Card quảng cáo 3D -->
        <div class="row g-4 mb-5">
            <div class="col-12">
                <div class="tour-card text-white" style="background: linear-gradient(135deg, var(--ocean-blue), var(--ocean-blue-dark));">
                    <div class="p-5 text-center">
                        <i class="bi bi-vr fs-1 mb-3 d-block"></i>
                        <h4 class="fw-bold mb-3">Trải nghiệm Tour Ảo 360° & 3D</h4>
                        <p class="lead mb-4">Khám phá Núi Sam, Rừng Tràm Trà Sư, Hồ Tà Pạ... như đang đứng tại chỗ!</p>
                        <a href="/tour3d" class="btn btn-light btn-lg px-5 fw-bold">
                            <i class="bi bi-eye me-2"></i> Khám phá ngay
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Grid Tour -->
        <div class="row g-4">
            <div class="col-md-6 col-lg-4" th:each="tour : ${tours}">
                <div class="tour-card h-100 d-flex flex-column">
                    <img th:src="${tour.imageUrl}" th:alt="${tour.tourName}" class="tour-img" loading="lazy">

                    <div class="p-4 d-flex flex-column flex-grow-1">
                        <h5 class="fw-bold mb-3" th:text="${tour.tourName}"></h5>

                        <div class="mb-2 text-secondary">
                            <i class="bi bi-geo-alt-fill me-2" style="color: var(--ocean-blue);"></i>
                            <strong>Khởi hành:</strong> <span th:text="${tour.departureLocation}"></span>
                        </div>

                        <div class="mb-3 text-secondary">
                            <i class="bi bi-flag-fill me-2" style="color: var(--ocean-blue);"></i>
                            <strong>Điểm đến:</strong> <span th:text="${tour.location}"></span>
                        </div>

                        <div class="mt-auto">
                            <div class="price-tag mb-3" th:text="${#numbers.formatDecimal(tour.price, 0, 'COMMA', 0, 'POINT')} + ' đ'"></div>
                            <a th:href="@{/tour/{id}(id=${tour.tourID})}" class="btn btn-primary w-100 py-3">
                                <i class="bi bi-eye me-2"></i> Xem chi tiết
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Floating Chat Button -->
    <a href="/chat" class="chat-float" title="Chat với CSKH">
        <i class="bi bi-chat-dots-fill"></i>
    </a>


</main>

<!-- Footer -->
<th:block th:replace="~{fragments/footer :: footer}"></th:block>

<!-- Dark mode toggle (tùy chọn) -->
<button id="theme-toggle" class="btn btn-primary rounded-circle p-3 shadow">
    <i class="bi bi-moon-stars-fill"></i>
</button>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

<script>
    // Dark mode toggle
    document.getElementById('theme-toggle')?.addEventListener('click', () => {
        document.body.dataset.theme = document.body.dataset.theme === 'dark' ? 'light' : 'dark';
        const icon = document.querySelector('#theme-toggle i');
        icon.classList.toggle('bi-moon-stars-fill');
        icon.classList.toggle('bi-sun-fill');
    });
</script>

</body>
</html>